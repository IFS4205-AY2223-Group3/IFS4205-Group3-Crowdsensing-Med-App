{"ast":null,"code":"var _jsxFileName = \"/Users/oscarlai/Desktop/NUS/Year 4/Semester 1/IFS4205/IFS4205-Group3-Crowdsensing-Med-App/frontend/src/context/AuthProvider.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { Navigate, useLocation } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { LOGIN_URL } from \"../api/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst authContext = /*#__PURE__*/React.createContext();\n\nfunction useAuth() {\n  _s();\n\n  const login = async _ref => {\n    let {\n      user,\n      pwd,\n      userRole\n    } = _ref;\n\n    try {\n      const response = await axios.post(LOGIN_URL, JSON.stringify({\n        user,\n        pwd,\n        userRole\n      }), {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        withCredentials: true\n      });\n      const accessToken = \"response?.data?.accessToken\";\n      const role = \"patient\";\n      const name = \"John\";\n      const userId = \"response?.data.userId\";\n      const auth = {\n        accessToken: accessToken,\n        userRole: role,\n        name: name,\n        userId: userId\n      };\n      setAuthed(auth);\n    } catch (error) {\n      const accessToken = \"response?.data?.accessToken\";\n      const role = \"patient\";\n      const name = \"John\";\n      const userId = \"response?.data.userId\";\n      const auth = {\n        accessToken: accessToken,\n        userRole: role,\n        name: name,\n        userId: userId\n      };\n      setAuthed(auth);\n      console.log(error);\n    }\n  }; // const checkRole = ({accessToken,userRole}) => {\n  //   if ()\n  // }\n\n\n  const [authed, setAuthed] = React.useState({});\n  return {\n    authed,\n    login // login() {\n    //   return new Promise((res) => {\n    //     setAuthed(true);\n    //     res();\n    //   });\n    // },\n    // logout() {\n    //   return new Promise((res) => {\n    //     setAuthed(false);\n    //     res();\n    //   });\n    // },\n\n  };\n}\n\n_s(useAuth, \"Q2JO+PJKTTXT6xB2iSmYXXBXQGw=\");\n\nexport function AuthProvider(_ref2) {\n  _s2();\n\n  let {\n    children\n  } = _ref2;\n  const auth = useAuth();\n  return /*#__PURE__*/_jsxDEV(authContext.Provider, {\n    value: auth,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 10\n  }, this);\n}\n\n_s2(AuthProvider, \"YuJWYXaKIY31b1y7U6yy3IXSxQA=\", false, function () {\n  return [useAuth];\n});\n\n_c = AuthProvider;\nexport default function AuthConsumer() {\n  _s3();\n\n  return React.useContext(authContext);\n}\n\n_s3(AuthConsumer, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\n_c2 = AuthConsumer;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AuthProvider\");\n$RefreshReg$(_c2, \"AuthConsumer\");","map":{"version":3,"names":["React","Navigate","useLocation","useNavigate","axios","LOGIN_URL","authContext","createContext","useAuth","login","user","pwd","userRole","response","post","JSON","stringify","headers","withCredentials","accessToken","role","name","userId","auth","setAuthed","error","console","log","authed","useState","AuthProvider","children","AuthConsumer","useContext"],"sources":["/Users/oscarlai/Desktop/NUS/Year 4/Semester 1/IFS4205/IFS4205-Group3-Crowdsensing-Med-App/frontend/src/context/AuthProvider.js"],"sourcesContent":["import * as React from \"react\";\nimport { Navigate, useLocation } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { LOGIN_URL } from \"../api/constants\";\n\nconst authContext = React.createContext();\n\nfunction useAuth() {\n  const login = async ({ user, pwd, userRole }) => {\n    try {\n      const response = await axios.post(\n        LOGIN_URL,\n        JSON.stringify({ user, pwd, userRole }),\n        {\n          headers: { \"Content-Type\": \"application/json\" },\n          withCredentials: true,\n        }\n      );\n      const accessToken = \"response?.data?.accessToken\";\n      const role = \"patient\";\n      const name = \"John\";\n      const userId = \"response?.data.userId\";\n\n      const auth = {\n        accessToken: accessToken,\n        userRole: role,\n        name: name,\n        userId: userId,\n      };\n\n      setAuthed(auth);\n    } catch (error) {\n      const accessToken = \"response?.data?.accessToken\";\n      const role = \"patient\";\n      const name = \"John\";\n      const userId = \"response?.data.userId\";\n\n      const auth = {\n        accessToken: accessToken,\n        userRole: role,\n        name: name,\n        userId: userId,\n      };\n      setAuthed(auth);\n      console.log(error);\n    }\n  };\n\n  // const checkRole = ({accessToken,userRole}) => {\n  //   if ()\n  // }\n\n  const [authed, setAuthed] = React.useState({});\n\n  return {\n    authed,\n    login,\n    // login() {\n    //   return new Promise((res) => {\n    //     setAuthed(true);\n    //     res();\n    //   });\n    // },\n    // logout() {\n    //   return new Promise((res) => {\n    //     setAuthed(false);\n    //     res();\n    //   });\n    // },\n  };\n}\n\nexport function AuthProvider({ children }) {\n  const auth = useAuth();\n\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\n}\n\nexport default function AuthConsumer() {\n  return React.useContext(authContext);\n}\n"],"mappings":";;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,kBAAtC;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,kBAA1B;;AAEA,MAAMC,WAAW,gBAAGN,KAAK,CAACO,aAAN,EAApB;;AAEA,SAASC,OAAT,GAAmB;EAAA;;EACjB,MAAMC,KAAK,GAAG,cAAmC;IAAA,IAA5B;MAAEC,IAAF;MAAQC,GAAR;MAAaC;IAAb,CAA4B;;IAC/C,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAN,CACrBT,SADqB,EAErBU,IAAI,CAACC,SAAL,CAAe;QAAEN,IAAF;QAAQC,GAAR;QAAaC;MAAb,CAAf,CAFqB,EAGrB;QACEK,OAAO,EAAE;UAAE,gBAAgB;QAAlB,CADX;QAEEC,eAAe,EAAE;MAFnB,CAHqB,CAAvB;MAQA,MAAMC,WAAW,GAAG,6BAApB;MACA,MAAMC,IAAI,GAAG,SAAb;MACA,MAAMC,IAAI,GAAG,MAAb;MACA,MAAMC,MAAM,GAAG,uBAAf;MAEA,MAAMC,IAAI,GAAG;QACXJ,WAAW,EAAEA,WADF;QAEXP,QAAQ,EAAEQ,IAFC;QAGXC,IAAI,EAAEA,IAHK;QAIXC,MAAM,EAAEA;MAJG,CAAb;MAOAE,SAAS,CAACD,IAAD,CAAT;IACD,CAtBD,CAsBE,OAAOE,KAAP,EAAc;MACd,MAAMN,WAAW,GAAG,6BAApB;MACA,MAAMC,IAAI,GAAG,SAAb;MACA,MAAMC,IAAI,GAAG,MAAb;MACA,MAAMC,MAAM,GAAG,uBAAf;MAEA,MAAMC,IAAI,GAAG;QACXJ,WAAW,EAAEA,WADF;QAEXP,QAAQ,EAAEQ,IAFC;QAGXC,IAAI,EAAEA,IAHK;QAIXC,MAAM,EAAEA;MAJG,CAAb;MAMAE,SAAS,CAACD,IAAD,CAAT;MACAG,OAAO,CAACC,GAAR,CAAYF,KAAZ;IACD;EACF,CAtCD,CADiB,CAyCjB;EACA;EACA;;;EAEA,MAAM,CAACG,MAAD,EAASJ,SAAT,IAAsBxB,KAAK,CAAC6B,QAAN,CAAe,EAAf,CAA5B;EAEA,OAAO;IACLD,MADK;IAELnB,KAFK,CAGL;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;EAdK,CAAP;AAgBD;;GA/DQD,O;;AAiET,OAAO,SAASsB,YAAT,QAAoC;EAAA;;EAAA,IAAd;IAAEC;EAAF,CAAc;EACzC,MAAMR,IAAI,GAAGf,OAAO,EAApB;EAEA,oBAAO,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEe,IAA7B;IAAA,UAAoCQ;EAApC;IAAA;IAAA;IAAA;EAAA,QAAP;AACD;;IAJeD,Y;UACDtB,O;;;KADCsB,Y;AAMhB,eAAe,SAASE,YAAT,GAAwB;EAAA;;EACrC,OAAOhC,KAAK,CAACiC,UAAN,CAAiB3B,WAAjB,CAAP;AACD;;IAFuB0B,Y;;MAAAA,Y"},"metadata":{},"sourceType":"module"}