{"ast":null,"code":"var _jsxFileName = \"/Users/oscarlai/Desktop/NUS/Year 4/Semester 1/IFS4205/IFS4205-Group3-Crowdsensing-Med-App/frontend/src/context/AuthProvider.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useNavigate } from \"react-router-dom\";\nimport axios from 'axios';\nimport * as constantClass from '../api/constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LOGIN_URL = constantClass.LOGIN_URL;\nconst authContext = /*#__PURE__*/React.createContext();\n\nfunction useAuth() {\n  _s();\n\n  const login = async () => {\n    try {\n      const response = await axios.post(LOGIN_URL, JSON.stringify({\n        user,\n        pwd,\n        userRole\n      }), {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        withCredentials: true\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const [authed, setAuthed] = React.useState(false);\n  return {\n    authed // login() {\n    //   return new Promise((res) => {\n    //     setAuthed(true);\n    //     res();\n    //   });\n    // },\n    // logout() {\n    //   return new Promise((res) => {\n    //     setAuthed(false);\n    //     res();\n    //   });\n    // },\n\n  };\n}\n\n_s(useAuth, \"yj23o1tvKS/8kbW7134qNZuYnyY=\");\n\nexport function AuthProvider(_ref) {\n  _s2();\n\n  let {\n    children\n  } = _ref;\n  const auth = useAuth();\n  return /*#__PURE__*/_jsxDEV(authContext.Provider, {\n    value: auth,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 10\n  }, this);\n}\n\n_s2(AuthProvider, \"YuJWYXaKIY31b1y7U6yy3IXSxQA=\", false, function () {\n  return [useAuth];\n});\n\n_c = AuthProvider;\nexport function RequireAuth(_ref2) {\n  _s3();\n\n  let {\n    children\n  } = _ref2;\n  const {\n    authed\n  } = useAuth();\n  const location = useLocation();\n  const navigate = useNavigate();\n  return authed === true ? children : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\",\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n}\n\n_s3(RequireAuth, \"ls4KvmGTIStyzzPTxYz94vj3pws=\", false, function () {\n  return [useAuth, useLocation, useNavigate];\n});\n\n_c2 = RequireAuth;\nexport default function AuthConsumer() {\n  _s4();\n\n  return React.useContext(authContext);\n}\n\n_s4(AuthConsumer, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\n_c3 = AuthConsumer;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"AuthProvider\");\n$RefreshReg$(_c2, \"RequireAuth\");\n$RefreshReg$(_c3, \"AuthConsumer\");","map":{"version":3,"names":["React","Navigate","useLocation","useNavigate","axios","constantClass","LOGIN_URL","authContext","createContext","useAuth","login","response","post","JSON","stringify","user","pwd","userRole","headers","withCredentials","error","console","log","authed","setAuthed","useState","AuthProvider","children","auth","RequireAuth","location","navigate","AuthConsumer","useContext"],"sources":["/Users/oscarlai/Desktop/NUS/Year 4/Semester 1/IFS4205/IFS4205-Group3-Crowdsensing-Med-App/frontend/src/context/AuthProvider.js"],"sourcesContent":["import * as React from \"react\";\nimport { Navigate, useLocation } from 'react-router-dom'\nimport { useNavigate } from \"react-router-dom\";\nimport axios from 'axios';\nimport * as constantClass from '../api/constants'\n\n\nconst LOGIN_URL = constantClass.LOGIN_URL;\n\nconst authContext = React.createContext();\n\nfunction useAuth() {\n\n  const login = async () => {\n    try {\n\n    const response = await axios.post(LOGIN_URL,\n      JSON.stringify({ user, pwd, userRole }),\n      {\n          headers: { 'Content-Type': 'application/json' },\n          withCredentials: true\n      })\n    } catch(error) {\n      console.log(error)\n    }\n\n  }\n\n  const [authed, setAuthed] = React.useState(false);\n\n  return {\n    authed,\n    // login() {\n    //   return new Promise((res) => {\n    //     setAuthed(true);\n    //     res();\n    //   });\n    // },\n    // logout() {\n    //   return new Promise((res) => {\n    //     setAuthed(false);\n    //     res();\n    //   });\n    // },\n  };\n}\n\nexport function AuthProvider({ children }) {\n  const auth = useAuth();\n\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\n}\n\nexport function RequireAuth({ children }) {\n    const { authed } = useAuth();\n    const location = useLocation();\n    const navigate = useNavigate();\n  \n    return authed === true\n      ? children\n      : <Navigate to=\"/login\" replace />;\n  }\n\nexport default function AuthConsumer() {\n  return React.useContext(authContext);\n}"],"mappings":";;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,kBAAtC;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,aAAZ,MAA+B,kBAA/B;;AAGA,MAAMC,SAAS,GAAGD,aAAa,CAACC,SAAhC;AAEA,MAAMC,WAAW,gBAAGP,KAAK,CAACQ,aAAN,EAApB;;AAEA,SAASC,OAAT,GAAmB;EAAA;;EAEjB,MAAMC,KAAK,GAAG,YAAY;IACxB,IAAI;MAEJ,MAAMC,QAAQ,GAAG,MAAMP,KAAK,CAACQ,IAAN,CAAWN,SAAX,EACrBO,IAAI,CAACC,SAAL,CAAe;QAAEC,IAAF;QAAQC,GAAR;QAAaC;MAAb,CAAf,CADqB,EAErB;QACIC,OAAO,EAAE;UAAE,gBAAgB;QAAlB,CADb;QAEIC,eAAe,EAAE;MAFrB,CAFqB,CAAvB;IAMC,CARD,CAQE,OAAMC,KAAN,EAAa;MACbC,OAAO,CAACC,GAAR,CAAYF,KAAZ;IACD;EAEF,CAbD;;EAeA,MAAM,CAACG,MAAD,EAASC,SAAT,IAAsBxB,KAAK,CAACyB,QAAN,CAAe,KAAf,CAA5B;EAEA,OAAO;IACLF,MADK,CAEL;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;EAbK,CAAP;AAeD;;GAlCQd,O;;AAoCT,OAAO,SAASiB,YAAT,OAAoC;EAAA;;EAAA,IAAd;IAAEC;EAAF,CAAc;EACzC,MAAMC,IAAI,GAAGnB,OAAO,EAApB;EAEA,oBAAO,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEmB,IAA7B;IAAA,UAAoCD;EAApC;IAAA;IAAA;IAAA;EAAA,QAAP;AACD;;IAJeD,Y;UACDjB,O;;;KADCiB,Y;AAMhB,OAAO,SAASG,WAAT,QAAmC;EAAA;;EAAA,IAAd;IAAEF;EAAF,CAAc;EACtC,MAAM;IAAEJ;EAAF,IAAad,OAAO,EAA1B;EACA,MAAMqB,QAAQ,GAAG5B,WAAW,EAA5B;EACA,MAAM6B,QAAQ,GAAG5B,WAAW,EAA5B;EAEA,OAAOoB,MAAM,KAAK,IAAX,GACHI,QADG,gBAEH,QAAC,QAAD;IAAU,EAAE,EAAC,QAAb;IAAsB,OAAO;EAA7B;IAAA;IAAA;IAAA;EAAA,QAFJ;AAGD;;IARaE,W;UACOpB,O,EACFP,W,EACAC,W;;;MAHL0B,W;AAUhB,eAAe,SAASG,YAAT,GAAwB;EAAA;;EACrC,OAAOhC,KAAK,CAACiC,UAAN,CAAiB1B,WAAjB,CAAP;AACD;;IAFuByB,Y;;MAAAA,Y"},"metadata":{},"sourceType":"module"}